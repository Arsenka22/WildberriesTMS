{"id":"modules/modal.js","dependencies":[{"name":"C:\\WildberriesTMS\\package.json","includedInParent":true,"mtime":1750694789472},{"name":"./state.js","loc":{"line":1,"column":22,"index":22},"parent":"C:\\WildberriesTMS\\src\\modules\\modal.js","resolved":"C:\\WildberriesTMS\\src\\modules\\state.js"}],"generated":{"js":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.initModal = initModal;\nvar _state = require(\"./state.js\");\nfunction _toConsumableArray(r) { return _arrayWithoutHoles(r) || _iterableToArray(r) || _unsupportedIterableToArray(r) || _nonIterableSpread(); }\nfunction _nonIterableSpread() { throw new TypeError(\"Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); }\nfunction _unsupportedIterableToArray(r, a) { if (r) { if (\"string\" == typeof r) return _arrayLikeToArray(r, a); var t = {}.toString.call(r).slice(8, -1); return \"Object\" === t && r.constructor && (t = r.constructor.name), \"Map\" === t || \"Set\" === t ? Array.from(r) : \"Arguments\" === t || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t) ? _arrayLikeToArray(r, a) : void 0; } }\nfunction _iterableToArray(r) { if (\"undefined\" != typeof Symbol && null != r[Symbol.iterator] || null != r[\"@@iterator\"]) return Array.from(r); }\nfunction _arrayWithoutHoles(r) { if (Array.isArray(r)) return _arrayLikeToArray(r); }\nfunction _arrayLikeToArray(r, a) { (null == a || a > r.length) && (a = r.length); for (var e = 0, n = Array(a); e < a; e++) n[e] = r[e]; return n; }\nfunction initModal(productsModule) {\n  var modal = document.getElementById(\"productModal\");\n  var overlay = document.getElementById(\"backgroundModal\");\n  var closeBtn = document.getElementById(\"closeProductModal\");\n  var form = document.getElementById(\"updateProductForm\");\n  var addBtn = document.getElementById(\"add-product-button\");\n  var open = function open() {\n    modal === null || modal === void 0 || modal.classList.remove(\"hidden\");\n    overlay === null || overlay === void 0 || overlay.classList.remove(\"hidden\");\n    document.body.classList.add(\"overflow-hidden\");\n  };\n  var close = function close() {\n    modal === null || modal === void 0 || modal.classList.add(\"hidden\");\n    overlay === null || overlay === void 0 || overlay.classList.add(\"hidden\");\n    document.body.classList.remove(\"overflow-hidden\");\n  };\n  closeBtn === null || closeBtn === void 0 || closeBtn.addEventListener(\"click\", close);\n  addBtn === null || addBtn === void 0 || addBtn.addEventListener(\"click\", open);\n  form === null || form === void 0 || form.addEventListener(\"submit\", function (e) {\n    var _document$getElementB, _document$getElementB2, _document$getElementB3, _document$getElementB4;\n    e.preventDefault();\n    var name = (_document$getElementB = document.getElementById(\"productName\")) === null || _document$getElementB === void 0 ? void 0 : _document$getElementB.value;\n    var newPrice = parseFloat((_document$getElementB2 = document.getElementById(\"productNewPrice\")) === null || _document$getElementB2 === void 0 ? void 0 : _document$getElementB2.value);\n    var oldPrice = parseFloat((_document$getElementB3 = document.getElementById(\"productOldPrice\")) === null || _document$getElementB3 === void 0 ? void 0 : _document$getElementB3.value);\n    var discount = parseInt((_document$getElementB4 = document.getElementById(\"productDiscount\")) === null || _document$getElementB4 === void 0 ? void 0 : _document$getElementB4.value);\n    if (!name || Number.isNaN(newPrice) || Number.isNaN(discount)) {\n      alert(\"Пожалуйста, заполните обязательные поля\");\n      return;\n    }\n    var newId = _state.state.allProducts.length ? Math.max.apply(Math, _toConsumableArray(_state.state.allProducts.map(function (p) {\n      return p.id;\n    }))) + 1 : 1;\n    _state.state.allProducts.push({\n      id: newId,\n      image: \"image_6.jpg\",\n      name: name,\n      newPrice: newPrice,\n      oldPrice: Number.isNaN(oldPrice) ? null : oldPrice,\n      discount: discount\n    });\n    localStorage.setItem(\"cards\", JSON.stringify(_state.state.allProducts));\n    productsModule.renderProducts();\n    close();\n    form.reset();\n  });\n}"},"sourceMaps":null,"error":null,"hash":"3aeba080e7715c0d155325e531a3b762","cacheData":{"env":{}}}