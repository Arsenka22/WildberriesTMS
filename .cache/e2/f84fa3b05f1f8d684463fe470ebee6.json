{"id":"TiIE","dependencies":[{"name":"C:\\WildberriesTMS\\package.json","includedInParent":true,"mtime":1750670536877},{"name":"./state.js","loc":{"line":1,"column":22,"index":22},"parent":"C:\\WildberriesTMS\\src\\modules\\cart.js","resolved":"C:\\WildberriesTMS\\src\\modules\\state.js"}],"generated":{"js":"\"use strict\";Object.defineProperty(exports,\"__esModule\",{value:!0}),exports.initCart=o;var t=require(\"./state.js\");function e(t){return(e=\"function\"==typeof Symbol&&\"symbol\"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&\"function\"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?\"symbol\":typeof t})(t)}function n(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)}return n}function r(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?n(Object(r),!0).forEach(function(e){i(t,e,r[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):n(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))})}return t}function i(t,e,n){return(e=a(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function a(t){var n=c(t,\"string\");return\"symbol\"==e(n)?n:n+\"\"}function c(t,n){if(\"object\"!=e(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var i=r.call(t,n||\"default\");if(\"object\"!=e(i))return i;throw new TypeError(\"@@toPrimitive must return a primitive value.\")}return(\"string\"===n?String:Number)(t)}function o(){var e=document.getElementById(\"busketButton\"),n=document.getElementById(\"cart\"),i=function(){return localStorage.setItem(\"cartData\",JSON.stringify(t.state.cartData))};function a(){var e,r;if(n){n.innerHTML='\\n      <div class=\"flex justify-between items-center mb-4\">\\n        <h2 class=\"text-2xl font-bold text-white\">Корзина</h2>\\n        <button id=\"closeCart\" class=\"text-white text-2xl cursor-pointer hover:text-gray-300\">✕</button>\\n      </div>\\n      <div id=\"cart-items\" class=\"flex-grow\"></div>\\n      <div id=\"cart-total\" class=\"text-white font-bold mt-4 pt-4 border-t border-gray-600 text-xl\"></div>';var a=document.getElementById(\"cart-items\"),s=document.getElementById(\"cart-total\");if(null===(e=document.getElementById(\"closeCart\"))||void 0===e||e.addEventListener(\"click\",function(){return n.classList.add(\"hidden\")}),!t.state.cartData.length)return a.innerHTML='<p class=\"text-white text-center py-4\">Корзина пуста</p>',void(s.textContent=\"\");var u=0;t.state.cartData.forEach(function(t){var e=t.newPrice*t.quantity;u+=e,a.innerHTML+='\\n        <div class=\"cart-item mb-3 p-3 bg-gray-600 rounded-lg\">\\n          <div class=\"flex justify-between items-start\">\\n            <div class=\"flex-1\">\\n              <h3 class=\"font-bold text-white\">'.concat(t.name,'</h3>\\n              <div class=\"flex justify-between mt-2\">\\n                <div>\\n                  <span class=\"text-white\">Цена: ').concat(t.newPrice,' руб.</span>\\n                  <div class=\"flex items-center mt-1\">\\n                    <button class=\"decrease-btn text-white bg-gray-500 rounded w-6 h-6 flex items-center justify-center\" data-id=\"').concat(t.id,'\">-</button>\\n                    <span class=\"text-white mx-2\">').concat(t.quantity,'</span>\\n                    <button class=\"increase-btn text-white bg-gray-500 rounded w-6 h-6 flex items-center justify-center\" data-id=\"').concat(t.id,'\">+</button>\\n                  </div>\\n                </div>\\n                <span class=\"font-bold text-white\">').concat(e,' руб.</span>\\n              </div>\\n            </div>\\n            <button class=\"remove-item text-red-400 hover:text-red-300 ml-4\" data-id=\"').concat(t.id,'\">✕</button>\\n          </div>\\n        </div>')}),s.innerHTML='\\n      <div class=\"flex justify-between\"><span>Итого:</span><span>'.concat(u,' руб.</span></div>\\n      <button id=\"checkout-btn\" class=\"w-full mt-4 bg-indigo-600 text-white py-2 rounded hover:bg-indigo-700\">Оформить заказ</button>'),a.querySelectorAll(\".remove-item\").forEach(function(t){return t.addEventListener(\"click\",function(t){c(+t.currentTarget.dataset.id)})}),a.querySelectorAll(\".decrease-btn\").forEach(function(t){return t.addEventListener(\"click\",function(t){o(+t.currentTarget.dataset.id,\"decrease\")})}),a.querySelectorAll(\".increase-btn\").forEach(function(t){return t.addEventListener(\"click\",function(t){o(+t.currentTarget.dataset.id,\"increase\")})}),null===(r=document.getElementById(\"checkout-btn\"))||void 0===r||r.addEventListener(\"click\",function(){alert(\"Заказ оформлен! Спасибо за покупку!\"),t.state.cartData=[],i(),n.classList.add(\"hidden\")})}}function c(e){t.state.cartData=t.state.cartData.filter(function(t){return t.id!==e}),a(),i()}function o(e,n){var r=t.state.cartData.find(function(t){return t.id===e});r&&(\"increase\"===n?r.quantity++:r.quantity=Math.max(1,r.quantity-1),a(),i())}return null==e||e.addEventListener(\"click\",function(){a(),n.classList.remove(\"hidden\")}),{addToCart:function(e){var n=t.state.allProducts.find(function(t){return t.id===e});if(n){var c,o,s,u=t.state.cartData.find(function(t){return t.id===e});u?u.quantity++:t.state.cartData.push(r(r({},n),{},{quantity:1})),c=\"Добавлено в корзину: \".concat(n.name),s=document.getElementById(\"cart-notification\"),null===(o=s)||void 0===o||o.remove(),(s=document.createElement(\"div\")).id=\"cart-notification\",s.textContent=c,s.className=\"fixed bottom-4 right-4 bg-green-500 text-white px-4 py-2 rounded shadow-lg z-50 animate-fade-in\",document.body.appendChild(s),setTimeout(function(){s.classList.replace(\"animate-fade-in\",\"animate-fade-out\"),setTimeout(function(){return s.remove()},300)},2e3),a(),i()}},renderCart:a,removeFromCart:c,updateQuantity:o}}"},"sourceMaps":null,"error":null,"hash":"0920f8675569c95f7e754c5dfd480103","cacheData":{"env":{}}}