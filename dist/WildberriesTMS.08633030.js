const e=[{id:1,image:"image_1.jpg",name:"Сумка",newPrice:100,oldPrice:150,discount:33},{id:2,image:"image_2.jpg",name:"Золотой браслет",newPrice:200,oldPrice:350,discount:43},{id:3,image:"image_3.jpg",name:"Кожаный ремень",newPrice:50,oldPrice:100,discount:50},{id:4,image:"image_4.jpg",name:"Кроссовки",newPrice:100,oldPrice:250,discount:60},{id:5,image:"image_5.jpg",name:"Вязаная кофта",newPrice:75,oldPrice:95,discount:21}],t={cartData:JSON.parse(localStorage.getItem("cartData"))||[],allProducts:(()=>{let t=JSON.parse(localStorage.getItem("cards"));return t&&t.length?t:(localStorage.setItem("cards",JSON.stringify(e)),[...e])})(),isSaleActive:!0,currentSlide:0,slideInterval:null};document.addEventListener("DOMContentLoaded",()=>{!function(){let e=document.getElementById("slider"),n=document.querySelectorAll("#slider > div"),a=document.querySelectorAll(".dot"),d=document.getElementById("prev"),r=document.getElementById("next");function i(d){e&&n.length&&(t.currentSlide=(d+n.length)%n.length,e.style.transform=`translateX(-${100*t.currentSlide}%)`,a.forEach((e,n)=>{e.classList.toggle("bg-yellow-400",n===t.currentSlide),e.classList.toggle("bg-yellow-200",n!==t.currentSlide)}))}function l(){clearInterval(t.slideInterval),t.slideInterval=setInterval(()=>i(t.currentSlide+1),3e3)}e&&n.length&&(i(0),l(),r?.addEventListener("click",()=>{i(t.currentSlide+1),l()}),d?.addEventListener("click",()=>{i(t.currentSlide-1),l()}),a.forEach((e,t)=>e.addEventListener("click",()=>{i(t),l()})),e.parentElement?.addEventListener("mouseenter",()=>clearInterval(t.slideInterval)),e.parentElement?.addEventListener("mouseleave",l))}();let e=function(){let e=document.getElementById("busketButton"),n=document.getElementById("cart"),a=()=>localStorage.setItem("cartData",JSON.stringify(t.cartData));function d(){if(!n)return;n.innerHTML=`
      <div class="flex justify-between items-center mb-4">
        <h2 class="text-2xl font-bold text-white">\u{41A}\u{43E}\u{440}\u{437}\u{438}\u{43D}\u{430}</h2>
        <button id="closeCart" class="text-white text-2xl cursor-pointer hover:text-gray-300">\u{2715}</button>
      </div>
      <div id="cart-items" class="flex-grow"></div>
      <div id="cart-total" class="text-white font-bold mt-4 pt-4 border-t border-gray-600 text-xl"></div>`;let e=document.getElementById("cart-items"),d=document.getElementById("cart-total");if(document.getElementById("closeCart")?.addEventListener("click",()=>n.classList.add("hidden")),!t.cartData.length){e.innerHTML='<p class="text-white text-center py-4">Корзина пуста</p>',d.textContent="";return}let l=0;t.cartData.forEach(t=>{let n=t.newPrice*t.quantity;l+=n,e.innerHTML+=`
        <div class="cart-item mb-3 p-3 bg-gray-600 rounded-lg">
          <div class="flex justify-between items-start">
            <div class="flex-1">
              <h3 class="font-bold text-white">${t.name}</h3>
              <div class="flex justify-between mt-2">
                <div>
                  <span class="text-white">\u{426}\u{435}\u{43D}\u{430}: ${t.newPrice} \u{440}\u{443}\u{431}.</span>
                  <div class="flex items-center mt-1">
                    <button class="decrease-btn text-white bg-gray-500 rounded w-6 h-6 flex items-center justify-center" data-id="${t.id}">-</button>
                    <span class="text-white mx-2">${t.quantity}</span>
                    <button class="increase-btn text-white bg-gray-500 rounded w-6 h-6 flex items-center justify-center" data-id="${t.id}">+</button>
                  </div>
                </div>
                <span class="font-bold text-white">${n} \u{440}\u{443}\u{431}.</span>
              </div>
            </div>
            <button class="remove-item text-red-400 hover:text-red-300 ml-4" data-id="${t.id}">\u{2715}</button>
          </div>
        </div>`}),d.innerHTML=`
      <div class="flex justify-between"><span>\u{418}\u{442}\u{43E}\u{433}\u{43E}:</span><span>${l} \u{440}\u{443}\u{431}.</span></div>
      <button id="checkout-btn" class="w-full mt-4 bg-indigo-600 text-white py-2 rounded hover:bg-indigo-700">\u{41E}\u{444}\u{43E}\u{440}\u{43C}\u{438}\u{442}\u{44C} \u{437}\u{430}\u{43A}\u{430}\u{437}</button>`,e.querySelectorAll(".remove-item").forEach(e=>e.addEventListener("click",e=>{r(+e.currentTarget.dataset.id)})),e.querySelectorAll(".decrease-btn").forEach(e=>e.addEventListener("click",e=>{i(+e.currentTarget.dataset.id,"decrease")})),e.querySelectorAll(".increase-btn").forEach(e=>e.addEventListener("click",e=>{i(+e.currentTarget.dataset.id,"increase")})),document.getElementById("checkout-btn")?.addEventListener("click",()=>{alert("Заказ оформлен! Спасибо за покупку!"),t.cartData=[],a(),n.classList.add("hidden")})}function r(e){t.cartData=t.cartData.filter(t=>t.id!==e),d(),a()}function i(e,n){let r=t.cartData.find(t=>t.id===e);r&&("increase"===n?r.quantity++:r.quantity=Math.max(1,r.quantity-1),d(),a())}return e?.addEventListener("click",()=>{d(),n.classList.remove("hidden")}),{addToCart:function(e){var n;let r,i=t.allProducts.find(t=>t.id===e);if(!i)return;let l=t.cartData.find(t=>t.id===e);l?l.quantity++:t.cartData.push({...i,quantity:1}),n=`\u{414}\u{43E}\u{431}\u{430}\u{432}\u{43B}\u{435}\u{43D}\u{43E} \u{432} \u{43A}\u{43E}\u{440}\u{437}\u{438}\u{43D}\u{443}: ${i.name}`,r=document.getElementById("cart-notification"),r?.remove(),(r=document.createElement("div")).id="cart-notification",r.textContent=n,r.className="fixed bottom-4 right-4 bg-green-500 text-white px-4 py-2 rounded shadow-lg z-50 animate-fade-in",document.body.appendChild(r),setTimeout(()=>{r.classList.replace("animate-fade-in","animate-fade-out"),setTimeout(()=>r.remove(),300)},2e3),d(),a()},renderCart:d,removeFromCart:r,updateQuantity:i}}(),n=function(e){let n=document.getElementById("app");return n?(n.addEventListener("click",t=>{let n=t.target.closest(".cart-btn");n&&e.addToCart(+n.dataset.id)}),{renderProducts:function(e=t.allProducts){n&&(n.innerHTML="",e.forEach(e=>n.appendChild(function(e){let{id:n,image:a,newPrice:d,oldPrice:r,discount:i,name:l}=e,c=t.isSaleActive?d:r??d,s=t.isSaleActive&&r?r:null,o=t.isSaleActive&&i,u=document.createElement("div");return u.className="card w-full max-w-xs bg-white shadow-lg rounded-lg overflow-hidden",u.innerHTML=`
      <div class="relative h-48 bg-gray-200 flex items-center justify-center">
        ${a?`<img src="/public/img/${a}" alt="${l}" class="w-full h-full object-cover">`:'<span class="text-gray-500">Изображение товара</span>'}
        ${o?`<div class="absolute left-2 top-2 bg-red-500 text-white font-bold px-2 py-1 rounded">-${i}%</div>`:""}
        <button class="absolute right-2 bottom-2 p-2 bg-indigo-600 rounded-full text-white cursor-pointer hover:bg-indigo-700 cart-btn" data-id="${n}">
          <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" viewBox="0 0 20 20" fill="currentColor"><path d="M3 1a1 1 0 000 2h1.22l.305 1.222a.997.997 0 00.01.042l1.358 5.43-.893.892C3.74 11.846 4.632 14 6.414 14H15a1 1 0 000-2H6.414l1-1H14a1 1 0 00.894-.553l3-6A1 1 0 0017 3H6.28l-.31-1.243A1 1 0 005 1H3zM16 16.5a1.5 1.5 0 11-3 0 1.5 1.5 0 013 0zM6.5 18a1.5 1.5 0 100-3 1.5 1.5 0 000 3z"/></svg>
        </button>
      </div>
      <div class="p-4">
        <div class="flex justify-between items-center mb-2">
          <div class="text-lg font-bold">${c} \u{20BD}</div>
          ${s?`<div class="text-gray-500 line-through text-sm">${s} \u{20BD}</div>`:""}
        </div>
        <div class="name text-gray-800">${l}</div>
      </div>`,u}(e))))}}):{renderProducts:()=>{}}}(e);!function(e){let n=document.getElementById("productModal"),a=document.getElementById("backgroundModal"),d=document.getElementById("closeProductModal"),r=document.getElementById("updateProductForm"),i=document.getElementById("add-product-button"),l=()=>{n?.classList.add("hidden"),a?.classList.add("hidden"),document.body.classList.remove("overflow-hidden")};d?.addEventListener("click",l),i?.addEventListener("click",()=>{n?.classList.remove("hidden"),a?.classList.remove("hidden"),document.body.classList.add("overflow-hidden")}),r?.addEventListener("submit",n=>{n.preventDefault();let a=document.getElementById("productName")?.value,d=parseFloat(document.getElementById("productNewPrice")?.value),i=parseFloat(document.getElementById("productOldPrice")?.value),c=parseInt(document.getElementById("productDiscount")?.value);if(!a||Number.isNaN(d)||Number.isNaN(c))return void alert("Пожалуйста, заполните обязательные поля");let s=t.allProducts.length?Math.max(...t.allProducts.map(e=>e.id))+1:1;t.allProducts.push({id:s,image:"image_6.jpg",name:a,newPrice:d,oldPrice:Number.isNaN(i)?null:i,discount:c}),localStorage.setItem("cards",JSON.stringify(t.allProducts)),e.renderProducts(),l(),r.reset()})}(n),function(e,n){let a=document.createElement("div");a.classList.add("font-bold","text-4xl","text-red-500","flex","justify-center","my-6","p-4","bg-gray-100","rounded");let d=document.createElement("span"),r=document.createElement("span"),i=document.createElement("span");r.textContent="00:",i.textContent="05",a.append(d,r,i);let l=document.getElementById("app");l?.parentNode?.insertBefore(a,l);let c=0,s=0,o=59,u=setInterval(()=>{if(o>0)o--,i.textContent=o.toString().padStart(2,"0");else{if(0===s&&0===c){clearInterval(u),a.innerHTML='<span class="text-2xl">Акция завершена!</span>',t.isSaleActive=!1,e.renderProducts(),n.renderCart();return}i.textContent=(o=59).toString().padStart(2,"0"),s>0?(s--,r.textContent=s.toString().padStart(2,"0")+":"):(r.textContent=(s=59).toString().padStart(2,"0")+":",c>0&&(c--,d.textContent=c.toString().padStart(2,"0")+":"))}},1e3)}(n,e);let a=document.getElementById("search");a&&(a.addEventListener("input",e=>{let a=e.target.value.trim().toLowerCase(),d=a?t.allProducts.filter(e=>e.name.toLowerCase().includes(a)):t.allProducts;n.renderProducts(d)}),a.addEventListener("focus",()=>{search.classList.remove("text-center")}),a.addEventListener("blur",()=>{search.classList.add("text-center"),search.value=""})),n.renderProducts(),window.shopApp={cart:e,products:n}});
//# sourceMappingURL=WildberriesTMS.08633030.js.map
